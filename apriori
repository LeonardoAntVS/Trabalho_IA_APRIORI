# Instalar a biblioteca necessÃ¡ria:

import pandas as pd
from mlxtend.frequent_patterns import apriori, association_rules

# ===============================
# 1. Criar base de transaÃ§Ãµes
# ===============================

# Exemplo de dados: cada linha Ã© uma transaÃ§Ã£o
basket = [
    ['leite', 'pÃ£o', 'manteiga'],
    ['pÃ£o', 'manteiga'],
    ['leite', 'cafÃ©'],
    ['leite', 'pÃ£o', 'manteiga', 'cafÃ©'],
    ['pÃ£o', 'cafÃ©']
]

# Transformar em um DataFrame "one-hot encoded"
from mlxtend.preprocessing import TransactionEncoder
te = TransactionEncoder()
te_ary = te.fit(basket).transform(basket)
df = pd.DataFrame(te_ary, columns=te.columns_)

print("ğŸ“¦ Base de dados:")
print(df)

# ===============================
# 2. Aplicar o algoritmo Apriori
# ===============================

# min_support = frequÃªncia mÃ­nima (ex: 0.4 â†’ aparece em 40% das transaÃ§Ãµes)
frequent_itemsets = apriori(df, min_support=0.4, use_colnames=True)

print("\nâœ… Itens frequentes:")
print(frequent_itemsets)

# ===============================
# 3. Gerar regras de associaÃ§Ã£o
# ===============================

# min_threshold = confianÃ§a mÃ­nima da regra
rules = association_rules(frequent_itemsets, metric="confidence", min_threshold=0.6)

print("\nğŸ“ˆ Regras de associaÃ§Ã£o encontradas:")
print(rules[['antecedents', 'consequents', 'support', 'confidence', 'lift']])
